<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>gsm: Gsm</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">gsm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Gsm</div>  </div>
</div><!--header-->
<div class="contents">

<p>This module handles the internal engine of the library.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga06818542b3c471ba114965d1526d106d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga06818542b3c471ba114965d1526d106d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>debug</b>(msg)</td></tr>
<tr class="separator:ga06818542b3c471ba114965d1526d106d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga246f1925726ab2bd77a8dddcaae15e26"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga246f1925726ab2bd77a8dddcaae15e26"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gsm.html#ga246f1925726ab2bd77a8dddcaae15e26">TKN_BUF_SIZE</a>&#160;&#160;&#160;1024</td></tr>
<tr class="memdesc:ga246f1925726ab2bd77a8dddcaae15e26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size in bytes of the tknVlRb buffer. <br/></td></tr>
<tr class="separator:ga246f1925726ab2bd77a8dddcaae15e26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b2430568b016c5a6e520af63e4b88e3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8b2430568b016c5a6e520af63e4b88e3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gsm.html#ga8b2430568b016c5a6e520af63e4b88e3">RSP_BUF_SIZE</a>&#160;&#160;&#160;1024</td></tr>
<tr class="memdesc:ga8b2430568b016c5a6e520af63e4b88e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size in bytes of the rspVlRb buffer. <br/></td></tr>
<tr class="separator:ga8b2430568b016c5a6e520af63e4b88e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga98de0d06859a21dd5792cc75d6ecc5d9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga98de0d06859a21dd5792cc75d6ecc5d9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gsm.html#ga98de0d06859a21dd5792cc75d6ecc5d9">URC_BUF_SIZE</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:ga98de0d06859a21dd5792cc75d6ecc5d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size in bytes of the urcVlRb buffer. <br/></td></tr>
<tr class="separator:ga98de0d06859a21dd5792cc75d6ecc5d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga84449ac99bb9a378f8d11e6b3e875ffa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga84449ac99bb9a378f8d11e6b3e875ffa"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gsm.html#ga84449ac99bb9a378f8d11e6b3e875ffa">TKN_CMD_SIZE</a>&#160;&#160;&#160;20</td></tr>
<tr class="memdesc:ga84449ac99bb9a378f8d11e6b3e875ffa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max size of an AT token command part. <br/></td></tr>
<tr class="separator:ga84449ac99bb9a378f8d11e6b3e875ffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae8cd88fd0ba86d82faf88b249e054bac"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae8cd88fd0ba86d82faf88b249e054bac"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>gsmInitEngine</b> (gsmEngine_t *engine)</td></tr>
<tr class="separator:gae8cd88fd0ba86d82faf88b249e054bac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga50bbd7544920f18bbc7f5104a8023671"><td class="memItemLeft" align="right" valign="top">fsmEvent_e&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gsm.html#ga50bbd7544920f18bbc7f5104a8023671">gsmProcessTkn</a> (gsmEngine_t *engine)</td></tr>
<tr class="separator:ga50bbd7544920f18bbc7f5104a8023671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4f56bd4e50e387e0854b4e5d91e07acd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4f56bd4e50e387e0854b4e5d91e07acd"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>gsmToutCntZero</b> (gsmEngine_t *engine)</td></tr>
<tr class="separator:ga4f56bd4e50e387e0854b4e5d91e07acd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1ec63b5b62ff7a829552d3b0de1c945"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad1ec63b5b62ff7a829552d3b0de1c945"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>gsmDecToutCnt</b> (gsmEngine_t *engine)</td></tr>
<tr class="separator:gad1ec63b5b62ff7a829552d3b0de1c945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3cd501ba729c92838c12f83f53fc35e0"><td class="memItemLeft" align="right" valign="top">fsmEvent_e&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__gsm.html#ga3cd501ba729c92838c12f83f53fc35e0">gsmSendCmd</a> (gsmEngine_t *engine, const uint8_t *cmdStr)</td></tr>
<tr class="separator:ga3cd501ba729c92838c12f83f53fc35e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab3a01fcce22cd813af9b12d796dff5c4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab3a01fcce22cd813af9b12d796dff5c4"></a>
rsp_t&#160;</td><td class="memItemRight" valign="bottom"><b>gsmGetCmdRsp</b> (gsmEngine_t *engine)</td></tr>
<tr class="separator:gab3a01fcce22cd813af9b12d796dff5c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This module handles the internal engine of the library. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga50bbd7544920f18bbc7f5104a8023671"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsmEvent_e gsmProcessTkn </td>
          <td>(</td>
          <td class="paramtype">gsmEngine_t *&#160;</td>
          <td class="paramname"><em>engine</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The processToken function checks if there are unread tokens in the token ring buffer. If so, it reads the oldest token, parses the token through the parse function and calls upon the gsmUpdateFsm function with the result. It then passes along the return value of the gsmUpdateFsm call. </p>

</div>
</div>
<a class="anchor" id="ga3cd501ba729c92838c12f83f53fc35e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fsmEvent_e gsmSendCmd </td>
          <td>(</td>
          <td class="paramtype">gsmEngine_t *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>cmdStr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The gsmSendCmd function first parses cmdStr in the same way as we would do with a token received from the GSM module. This is needed since we are going to use the token to update the FSM. We parse cmdStr, make sure that it is a recognized command and write it in the correct format to the serial port. Afterwards, gsmUpdateFsm is called. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Sep 15 2019 11:53:11 for gsm by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
